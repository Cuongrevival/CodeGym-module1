<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>

    const gameContainer = document.createElement('div');
    const scoreDisplay = document.createElement('div');
    const gameCanvas = document.createElement('canvas');

    gameContainer.style.display = 'flex';
    gameContainer.style.flexDirection = 'column';
    gameContainer.style.alignItems = 'center';
    scoreDisplay.style.margin = '10px';
    scoreDisplay.style.fontSize = '20px';
    scoreDisplay.innerText = 'Score: 0';

    gameCanvas.width = 800;
    gameCanvas.height = 600;
    gameCanvas.style.border = '1px solid black';

    gameContainer.appendChild(scoreDisplay);
    gameContainer.appendChild(gameCanvas);
    document.body.appendChild(gameContainer);

    const ctx = gameCanvas.getContext('2d');

    // Game variables
    let car = {x: 400, y: 300, width: 40, height: 20, speed: 2, direction: 0};
    let score = 0;
    let obstacles = [];
    let rewards = [];
    let gameRunning = true;

    // Helper functions
    function createObstacle() {
        return {
            x: Math.random() * (gameCanvas.width - 40),
            y: Math.random() * (gameCanvas.height - 40),
            width: 40,
            height: 40,
        };
    }

    function createReward() {
        return {
            x: Math.random() * (gameCanvas.width - 20),
            y: Math.random() * (gameCanvas.height - 20),
            width: 20,
            height: 20,
        };
    }

    function drawCar() {
        ctx.fillStyle = 'blue';
        ctx.fillRect(car.x, car.y, car.width, car.height);
    }

    function drawObstacles() {
        ctx.fillStyle = 'red';
        obstacles.forEach(obstacle => {
            ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
        });
    }

    function drawRewards() {
        ctx.fillStyle = 'gold';
        rewards.forEach(reward => {
            ctx.fillRect(reward.x, reward.y, reward.width, reward.height);
        });
    }

    function updateCarPosition() {
        car.x += car.speed * Math.cos(car.direction);
        car.y += car.speed * Math.sin(car.direction);

        if (car.x < 0) car.x = gameCanvas.width;
        if (car.x > gameCanvas.width) car.x = 0;
        if (car.y < 0) car.y = gameCanvas.height;
        if (car.y > gameCanvas.height) car.y = 0;
    }

    function checkCollisions() {
        obstacles.forEach(obstacle => {
            if (
                car.x < obstacle.x + obstacle.width &&
                car.x + car.width > obstacle.x &&
                car.y < obstacle.y + obstacle.height &&
                car.y + car.height > obstacle.y
            ) {
                gameRunning = false;
                alert('Game Over!');
            }
        });

        rewards = rewards.filter(reward => {
            if (
                car.x < reward.x + reward.width &&
                car.x + car.width > reward.x &&
                car.y < reward.y + reward.height &&
                car.y + car.height > reward.y
            ) {
                score += 10;
                scoreDisplay.innerText = `Score: ${score}`;
                return false;
            }
            return true;
        });
    }

    function gameLoop() {
        if (!gameRunning) return;

        ctx.clearRect(0, 0, gameCanvas.width, gameCanvas.height);

        drawCar();
        drawObstacles();
        drawRewards();

        updateCarPosition();
        checkCollisions();

        requestAnimationFrame(gameLoop);
    }

    // Event listeners
    window.addEventListener('keydown', e => {
        switch (e.key) {
            case 'ArrowUp':
                car.direction = -Math.PI / 2;
                break;
            case 'ArrowDown':
                car.direction = Math.PI / 2;
                break;
            case 'ArrowLeft':
                car.direction = Math.PI;
                break;
            case 'ArrowRight':
                car.direction = 0;
                break;
            case 'Control':
                car.speed = 5;
                break;
        }
    });

    window.addEventListener('keyup', e => {
        if (e.key === 'Control') {
            car.speed = 2;
        }
    });

    // Initialize game
    for (let i = 0; i < 5; i++) {
        obstacles.push(createObstacle());
        rewards.push(createReward());
    }

    gameLoop();

</script>
</body>
</html>